(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{9460:function(e,n,s){Promise.resolve().then(s.bind(s,5685))},5653:function(e,n,s){"use strict";s.d(n,{I:function(){return c},db:function(){return d}});var r=s(4752),t=s(738),a=s(5978),i=s(6834);let o=(0,t.ZF)({apiKey:"AIzaSyCHCfOYdJGc7lpbNHeE7-pz0-wk2Y0ywM0",authDomain:"eventmaster-database.firebaseapp.com",projectId:"eventmaster-database",storageBucket:"eventmaster-database.firebaseapp.com",messagingSenderId:"594662023462",appId:"1:594662023462:web:ec42c0d6f019882bdf61e7",measurementId:"G-3PQRS2J4ZD"}),d=(0,a.ad)(o);(0,i.Gb)().then(e=>{e&&(0,i.IH)(o)});let c=(0,r.v0)(o)},9376:function(e,n,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(n,{useRouter:function(){return r.useRouter}})},5685:function(e,n,s){"use strict";s.r(n);var r=s(7437),t=s(2265),a=s(5653),i=s(5978),o=s(9376);n.default=()=>{let[e,n]=(0,t.useState)([]),[s,d]=(0,t.useState)(""),[c,l]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),[f,v]=(0,t.useState)(!1),p=(0,o.useRouter)();(0,t.useEffect)(()=>{v(!0)},[]),(0,t.useEffect)(()=>{f&&(async()=>{let e=a.I.currentUser;if(!e){p.push("/signin");return}try{let n=(0,i.JU)(a.db,"users",e.uid),s=await (0,i.QT)(n);if(s.exists()){let e=s.data();e&&e.isAdmin?h(!0):(h(!1),p.push("/dashboard"))}else h(!1),p.push("/dashboard")}catch(e){console.error("Error checking admin status:",e),h(!1),p.push("/dashboard")}})()},[f,p]),(0,t.useEffect)(()=>{null!==u&&(async()=>{try{let s=(0,i.hJ)(a.db,"confirmed_reservations"),r=await (0,i.PL)(s),t=[];for(let n of r.docs){let s=n.data();if("confirmed"===s.status){let r=(0,i.JU)(a.db,"veneus",s.venueId),o=await (0,i.QT)(r);if(console.log("Fetching venue for venueId: ".concat(s.venueId)),o.exists()){var e;let r=null===(e=o.data())||void 0===e?void 0:e.ven_name;t.push({...s,id:n.id,venueName:r||"Unknown Venue"})}else console.warn("Venue with ID ".concat(s.venueId," not found.")),t.push({...s,id:n.id,venueName:"Unknown Venue"})}}n(t)}catch(e){console.error("Error fetching confirmed reservations:",e),d("Failed to fetch confirmed reservations. Please try again later.")}finally{l(!1)}})()},[u]);let m=async e=>{if(window.confirm("Are you sure you want to delete this reservation?"))try{let s=(0,i.JU)(a.db,"confirmed_reservations",e);await (0,i.oe)(s),d("Reservation deleted successfully."),n(n=>n.filter(n=>n.id!==e))}catch(e){console.error("Error deleting reservation:",e),d("Error deleting reservation. Please try again.")}};return null===u?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsxs)("div",{className:"admin-container",children:[(0,r.jsx)("h1",{children:"View Confirmed Reservations"}),s&&(0,r.jsx)("p",{children:s}),c?(0,r.jsx)("p",{children:"Loading confirmed reservations..."}):(0,r.jsx)("div",{className:"reservation-list",children:0===e.length?(0,r.jsx)("p",{children:"No confirmed reservations available."}):e.map(e=>(0,r.jsxs)("div",{className:"reservation-item",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Venue:"})," ",e.venueId," - ",e.venueName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Attendees:"})," ",e.attendees]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Reservation Date:"})," ",e.date]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Price:"})," ",e.price]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Payment Method:"})," ",e.paymentMethod]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,r.jsx)("button",{onClick:()=>m(e.id),className:"delete-btn",style:{backgroundColor:"red"},children:"Delete Reservation"}),(0,r.jsx)("hr",{className:"reservation-divider"})]},e.id))}),(0,r.jsx)("button",{onClick:()=>p.push("/dashboard"),style:{display:"block",margin:"20px auto",padding:"10px",fontSize:"16px",backgroundColor:"#6c757d",color:"#FFF",border:"none",borderRadius:"4px",cursor:"pointer",maxWidth:"200px"},children:"Back to Home"})]})}}},function(e){e.O(0,[358,400,957,971,117,744],function(){return e(e.s=9460)}),_N_E=e.O()}]);