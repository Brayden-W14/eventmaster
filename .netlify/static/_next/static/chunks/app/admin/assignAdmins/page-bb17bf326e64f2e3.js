(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{3770:function(e,s,n){Promise.resolve().then(n.bind(n,2110))},5653:function(e,s,n){"use strict";n.d(s,{I:function(){return c},db:function(){return d}});var r=n(4752),t=n(738),a=n(5978),i=n(6834);let o=(0,t.ZF)({apiKey:"AIzaSyCHCfOYdJGc7lpbNHeE7-pz0-wk2Y0ywM0",authDomain:"eventmaster-database.firebaseapp.com",projectId:"eventmaster-database",storageBucket:"eventmaster-database.firebaseapp.com",messagingSenderId:"594662023462",appId:"1:594662023462:web:ec42c0d6f019882bdf61e7",measurementId:"G-3PQRS2J4ZD"}),d=(0,a.ad)(o);(0,i.Gb)().then(e=>{e&&(0,i.IH)(o)});let c=(0,r.v0)(o)},9376:function(e,s,n){"use strict";var r=n(5475);n.o(r,"useRouter")&&n.d(s,{useRouter:function(){return r.useRouter}})},2110:function(e,s,n){"use strict";n.r(s);var r=n(7437),t=n(2265),a=n(5653),i=n(9376),o=n(5978),d=n(4752);s.default=()=>{let[e,s]=(0,t.useState)(null),[n,c]=(0,t.useState)(null),[u,l]=(0,t.useState)([]),[m,p]=(0,t.useState)(!0),h=(0,i.useRouter)();(0,t.useEffect)(()=>{let e=(0,d.Aj)(a.I,async e=>{if(e){s(e);try{let s=(0,o.JU)(a.db,"users",e.uid),n=await (0,o.QT)(s);if(n.exists()){let e=n.data();c(e.isAdmin||!1),e.isAdmin||h.push("/dashboard")}else console.warn("No user document found."),h.push("/dashboard")}catch(e){console.error("Error checking admin status:",e),h.push("/dashboard")}}else h.push("/signin")});return()=>e()},[h]),(0,t.useEffect)(()=>{(async()=>{p(!0);try{let e=(0,o.hJ)(a.db,"users"),s=(await (0,o.PL)(e)).docs.map(e=>{let s=e.data();return{id:e.id,name:s.name||"Unknown",email:s.email||"No Email",isAdmin:!0===s.isAdmin}}).filter(e=>!1===e.isAdmin);l(s)}catch(e){console.error("Error fetching users:",e)}finally{p(!1)}})()},[]);let f=async(e,s)=>{if(window.confirm("Are you sure you want to promote ".concat(s," to admin?")))try{let n=(0,o.JU)(a.db,"users",e);await (0,o.r7)(n,{isAdmin:!0}),alert("".concat(s," has been promoted to admin.")),l(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Error promoting user to admin:",e),alert("Failed to promote user. Please try again.")}};return m?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsxs)("div",{className:"admin-container",children:[(0,r.jsx)("h1",{children:"Assign Admins"}),(0,r.jsx)("div",{className:"user-list",children:u.map(e=>(0,r.jsxs)("div",{className:"user-item",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",e.name||"Unknown"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Admin Status:"})," Not Admin"]}),(0,r.jsx)("button",{onClick:()=>f(e.id,e.name||"this user"),className:"promote-btn",style:{backgroundColor:"green",color:"white",padding:"10px 20px",borderRadius:"5px"},children:"Promote to Admin"}),(0,r.jsx)("hr",{})]},e.id))}),(0,r.jsx)("button",{onClick:()=>h.push("/dashboard"),style:{display:"block",margin:"20px auto",padding:"10px",fontSize:"16px",backgroundColor:"#6c757d",color:"#FFF",border:"none",borderRadius:"4px",cursor:"pointer",maxWidth:"200px"},children:"Back to Home"})]})}}},function(e){e.O(0,[358,400,957,971,117,744],function(){return e(e.s=3770)}),_N_E=e.O()}]);