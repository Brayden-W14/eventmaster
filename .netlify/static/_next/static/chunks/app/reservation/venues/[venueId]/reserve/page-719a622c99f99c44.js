(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{5747:function(e,t,a){Promise.resolve().then(a.bind(a,5040))},5653:function(e,t,a){"use strict";a.d(t,{I:function(){return o},db:function(){return d}});var n=a(4752),r=a(738),i=a(5978),s=a(6834);let l=(0,r.ZF)({apiKey:"AIzaSyCHCfOYdJGc7lpbNHeE7-pz0-wk2Y0ywM0",authDomain:"eventmaster-database.firebaseapp.com",projectId:"eventmaster-database",storageBucket:"eventmaster-database.firebaseapp.com",messagingSenderId:"594662023462",appId:"1:594662023462:web:ec42c0d6f019882bdf61e7",measurementId:"G-3PQRS2J4ZD"}),d=(0,i.ad)(l);(0,s.Gb)().then(e=>{e&&(0,s.IH)(l)});let o=(0,n.v0)(l)},9376:function(e,t,a){"use strict";var n=a(5475);a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})},5040:function(e,t,a){"use strict";a.r(t);var n=a(7437),r=a(2265),i=a(5978),s=a(9376),l=a(5653);t.default=()=>{let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[c,p]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(null),[y,f]=(0,r.useState)(null),[j,S]=(0,r.useState)("cash"),[C,k]=(0,r.useState)(""),[F,w]=(0,r.useState)(""),[E,I]=(0,r.useState)(""),N=(0,s.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=(0,i.hJ)(l.db,"veneus"),a=await (0,i.PL)(e),n=[];a.forEach(e=>{let t=e.data();n.push({...t,id:e.id})}),t(n),console.log("Fetched venues:",n)}catch(e){console.error("Error fetching venues:",e)}})(),(()=>{let e=l.I.currentUser;e?f(e.uid):N.push("/signin")})()},[N]);let D=t=>{d(t);let a=e.find(e=>e.id===t);v(a?a.capacity:null)},z=async()=>{if(!o||!c||!h||!a||!y){alert("Please fill out all fields.");return}if(null!==b&&c>b){alert("The number of attendees exceeds the capacity of the selected venue.");return}if("debit"===j&&(!C||!F||!E)){alert("Please provide all debit card details.");return}if("debit"===j&&C.replace(/[^0-9]/g,"").length>20){alert("Card number is too long. It should be a maximum of 20 digits.");return}if("debit"===j&&E.length>3){alert("CVV should be a maximum of 3 digits.");return}try{let t=(0,i.IO)((0,i.hJ)(l.db,"confirmed_reservations"),(0,i.ar)("venueId","==",a),(0,i.ar)("date","==",h)),n=await (0,i.PL)(t),r=(0,i.IO)((0,i.hJ)(l.db,"pending_reservations"),(0,i.ar)("venueId","==",a),(0,i.ar)("date","==",h),(0,i.ar)("status","==","pending")),s=await (0,i.PL)(r);if(!n.empty||!s.empty){alert("The selected venue is already reserved on this date.");return}let m=e.find(e=>e.id===a),b=m?m.price:0,f=(0,i.hJ)(l.db,"pending_reservations"),C={name:o,attendees:String(c),date:h,venueId:a,status:"pending",createdAt:i.EK.fromDate(new Date),userID:y,paymentMethod:j,price:b};await (0,i.ET)(f,C),g("Reservation successfully submitted!"),console.log("Reservation submitted:",C),u(""),p(""),x(""),d(""),v(null),S("cash"),k(""),w(""),I("")}catch(e){console.error("Error submitting reservation:",e),g("There was an error submitting your reservation.")}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Reserve Your Venue"}),(0,n.jsxs)("form",{onSubmit:e=>e.preventDefault(),style:{maxWidth:"500px",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"partyName",children:(0,n.jsx)("strong",{children:"Name of the Party:"})}),(0,n.jsx)("input",{id:"partyName",type:"text",value:o,onChange:e=>u(e.target.value),placeholder:"Enter the name of the party",style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"attendees",children:(0,n.jsx)("strong",{children:"Number of Attendees:"})}),(0,n.jsx)("input",{id:"attendees",type:"number",value:c,onChange:e=>p(Number(e.target.value)),placeholder:"Enter the number of attendees",style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"reservationDate",children:(0,n.jsx)("strong",{children:"Reservation Date:"})}),(0,n.jsx)("input",{id:"reservationDate",type:"date",value:h,onChange:e=>x(e.target.value),style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"venueSelect",children:(0,n.jsx)("strong",{children:"Select Venue:"})}),(0,n.jsxs)("select",{id:"venueSelect",value:a,onChange:e=>D(e.target.value),style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"},children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"-- Select a Venue --"}),e.length>0?e.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.ven_name," - ",e.location," (Capacity: ",e.capacity,")"]},e.id)):(0,n.jsx)("option",{value:"",children:"No venues available"})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"paymentMethod",children:(0,n.jsx)("strong",{children:"Payment Method:"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"radio",id:"cash",name:"paymentMethod",value:"cash",checked:"cash"===j,onChange:()=>S("cash")}),(0,n.jsx)("label",{htmlFor:"cash",style:{marginLeft:"5px"},children:"Cash"}),(0,n.jsx)("input",{type:"radio",id:"debit",name:"paymentMethod",value:"debit",checked:"debit"===j,onChange:()=>S("debit"),style:{marginLeft:"10px"}}),(0,n.jsx)("label",{htmlFor:"debit",style:{marginLeft:"5px"},children:"Debit"})]})]}),"debit"===j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"cardNumber",children:(0,n.jsx)("strong",{children:"Card Number:"})}),(0,n.jsx)("input",{id:"cardNumber",type:"text",value:C,onChange:e=>k(e.target.value),placeholder:"Enter your debit card number",maxLength:20,style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"expirationDate",children:(0,n.jsx)("strong",{children:"Expiration Date:"})}),(0,n.jsx)("input",{id:"expirationDate",type:"month",value:F,onChange:e=>w(e.target.value),style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{htmlFor:"cvv",children:(0,n.jsx)("strong",{children:"CVV:"})}),(0,n.jsx)("input",{id:"cvv",type:"text",value:E,onChange:e=>I(e.target.value),maxLength:3,placeholder:"Enter your card's CVV",style:{display:"block",width:"100%",padding:"10px",marginTop:"5px",fontSize:"16px"}})]})]}),(0,n.jsx)("button",{type:"submit",onClick:z,style:{display:"block",width:"100%",padding:"10px",fontSize:"16px",backgroundColor:"#007BFF",color:"#FFF",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reserve Now"})]}),(0,n.jsx)("button",{onClick:()=>N.push("/dashboard"),style:{display:"block",margin:"20px auto",padding:"10px",fontSize:"16px",backgroundColor:"#6c757d",color:"#FFF",border:"none",borderRadius:"4px",cursor:"pointer",maxWidth:"200px"},children:"Back to Home"}),m&&(0,n.jsx)("p",{style:{marginTop:"20px",fontSize:"18px",fontWeight:"bold",color:"green"},children:m})]})}}},function(e){e.O(0,[358,400,957,971,117,744],function(){return e(e.s=5747)}),_N_E=e.O()}]);